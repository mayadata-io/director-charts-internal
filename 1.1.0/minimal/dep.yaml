apiVersion: v1
items:
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: alertmanager
    name: alertmanager
    namespace: maya
  spec:
    replicas: 1
    selector:
      matchLabels:
        name: alertmanager
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        labels:
          name: alertmanager
      spec:
        containers:
        - args:
          - -log.level=debug
          - -server.http-listen-port=80
          - -alertmanager.configs.url=http://configs.maya.svc.cluster.local:80
          - -alertmanager.web.external-url=/api/prom/alertmanager
          image: registry.mayadata.io/cortex-alertmanager:1.1.0-ee
          imagePullPolicy: Always
          name: alertmanager
          ports:
          - containerPort: 80
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        initContainers:
        - command:
          - sh
          - -c
          - |
            set -ex
            export MAYA=$(kubectl get ClusterRoleBinding | grep -w crb-maya-io | awk '{print $1}')
            echo $MAYA
            until [ ! -z "$MAYA" ]
            do
               echo "wating for ClusterRoleBinding";
               sleep 1;
               export MAYA=$(kubectl get ClusterRoleBinding | grep -w crb-maya-io | awk '{print $1}');
               echo $MAYA;
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: am-wait-for-crb
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for configs"
               sleep 2;
               export COUNT=$(kubectl get pods -l name=configs -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w configs | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: am-wait-for-configs
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for maya-io-server"
               sleep 2;
               export COUNT=$(kubectl get pods -l app=maya-io -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w maya-io | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: am-wait-for-maya-io
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: sa-maya-io
        serviceAccountName: sa-maya-io
        terminationGracePeriodSeconds: 30
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: alertstore
    name: alertstore
    namespace: maya
  spec:
    replicas: 1
    selector:
      matchLabels:
        name: alertstore
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          name: alertstore
      spec:
        containers:
        - args:
          - -server.http-listen-port=80
          - -storage.storage-client=cassandra
          - -cassandra.addresses=cassandra.maya.svc.cluster.local
          - -cassandra.keyspace=mayaalerts
          - -cassandra.replication-factor=1
          - -log.level=debug
          - -alertstore.version=1
          image: registry.mayadata.io/alertstore:1.1.0-ee
          imagePullPolicy: Always
          name: alertstore
          ports:
          - containerPort: 80
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        initContainers:
        - command:
          - sh
          - -c
          - |
            set -ex
            export MAYA=$(kubectl get ClusterRoleBinding | grep -w crb-maya-io | awk '{print $1}')
            echo $MAYA
            until [ ! -z "$MAYA" ]
            do
               echo "wating for ClusterRoleBinding"
               sleep 1;
               export MAYA=$(kubectl get ClusterRoleBinding | grep -w crb-maya-io | awk '{print $1}')
               echo $MAYA
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: init-agent
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for cassandra"
               sleep 2;
               export COUNT=$(kubectl get pods -l app=cassandra -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w cassandra | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: as-wait-for-cassandra
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for alertstore-tablemanager"
               sleep 2;
               export COUNT=$(kubectl get pods -l name=alertstore-tablemanager -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w alertstore-tablemanager | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: as-wait-for-as-tablemanager
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: sa-maya-io
        serviceAccountName: sa-maya-io
        terminationGracePeriodSeconds: 30
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: alertstore-tablemanager
    name: alertstore-tablemanager
    namespace: maya
  spec:
    replicas: 1
    selector:
      matchLabels:
        name: alertstore-tablemanager
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          name: alertstore-tablemanager
      spec:
        containers:
        - args:
          - -server.http-listen-port=80
          - -storage.storage-client=cassandra
          - -cassandra.addresses=cassandra.maya.svc.cluster.local
          - -cassandra.keyspace=mayaalerts
          - -cassandra.replication-factor=1
          - -log.level=debug
          - -tablemanager.version=1
          - -alertstore.version=1
          image: registry.mayadata.io/alertstore-tablemanager:1.1.0-ee
          imagePullPolicy: Always
          name: alertstore-tablemanager
          ports:
          - containerPort: 80
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        initContainers:
        - command:
          - sh
          - -c
          - |
            set -ex
            export MAYA=$(kubectl get ClusterRoleBinding | grep -w crb-maya-io | awk '{print $1}')
            echo $MAYA
            until [ ! -z "$MAYA" ]
            do
               echo "wating for ClusterRoleBinding"
               sleep 1;
               export MAYA=$(kubectl get ClusterRoleBinding | grep -w crb-maya-io | awk '{print $1}')
               echo $MAYA
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: astm-wait-for-crb
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for cassandra"
               sleep 2;
               export COUNT=$(kubectl get pods -l app=cassandra -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w cassandra | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: astm-wait-for-cassandra
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: sa-maya-io
        serviceAccountName: sa-maya-io
        terminationGracePeriodSeconds: 30
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: cloud-agent
      name: cloud-agent
    name: cloud-agent
    namespace: maya
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: cloud-agent
        name: cloud-agent
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: cloud-agent
          name: cloud-agent
      spec:
        containers:
        - image: registry.mayadata.io/cloud-agent:1.1.0-ee
          imagePullPolicy: Always
          name: cloud-agent
          ports:
          - containerPort: 8880
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: configs
    name: configs
    namespace: maya
  spec:
    replicas: 1
    selector:
      matchLabels:
        name: configs
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          name: configs
      spec:
        containers:
        - args:
          - -server.http-listen-port=80
          - -database.uri=postgres://postgres@configs-db.maya.svc.cluster.local/configs?sslmode=disable
          - -database.migrations=/migrations
          image: registry.mayadata.io/cortex-configs:1.1.0-ee
          imagePullPolicy: Always
          name: configs
          ports:
          - containerPort: 80
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        initContainers:
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for configs-db"
               sleep 2;
               export COUNT=$(kubectl get pods -l name=configs-db -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w configs-db | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: cf-wait-for-configs-db
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: sa-maya-io
        serviceAccountName: sa-maya-io
        terminationGracePeriodSeconds: 30
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: configs-db
    name: configs-db
    namespace: maya
  spec:
    replicas: 1
    selector:
      matchLabels:
        name: configs-db
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        annotations:
          prometheus.io.scrape: "false"
        creationTimestamp: null
        labels:
          name: configs-db
      spec:
        containers:
        - env:
          - name: POSTGRES_DB
            value: configs
          image: postgres:9.6
          imagePullPolicy: IfNotPresent
          name: configs-db
          ports:
          - containerPort: 5432
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: consul
    name: consul
    namespace: maya
  spec:
    replicas: 1
    selector:
      matchLabels:
        name: consul
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          name: consul
      spec:
        containers:
        - args:
          - agent
          - -ui
          - -server
          - -client=0.0.0.0
          - -bootstrap
          env:
          - name: CHECKPOINT_DISABLE
            value: "1"
          image: consul:0.7.1
          imagePullPolicy: IfNotPresent
          name: consul
          ports:
          - containerPort: 8300
            name: server-noscrape
            protocol: TCP
          - containerPort: 8301
            name: serf-noscrape
            protocol: TCP
          - containerPort: 8400
            name: client-noscrape
            protocol: TCP
          - containerPort: 8500
            name: http-noscrape
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      k8s-app: kibana-logging
    name: kibana-logging
    namespace: maya
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        k8s-app: kibana-logging
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
          k8s-app: kibana-logging
      spec:
        containers:
        - env:
          - name: SERVER_BASEPATH
            value: /kibana
          image: registry.mayadata.io/kibana:1.1.0-ee
          imagePullPolicy: Always
          name: kibana-logging
          ports:
          - containerPort: 5601
            name: ui
            protocol: TCP
          resources:
            limits:
              cpu: 30m
            requests:
              cpu: 10m
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: maya-io
    name: maya-io
    namespace: maya
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: maya-io
    strategy:
      type: Recreate
    template:
      metadata:
        labels:
          app: maya-io
      spec:
        containers:
        - args:
          - --db-host
          - mysql.maya.svc.cluster.local
          - --db-user
          - maya
          - --db-pass
          - maya
          - --db-name
          - maya
          image: registry.mayadata.io/maya-io-server:1.1.0-ee
          imagePullPolicy: Always
          name: maya-io
          ports:
          - containerPort: 8080
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /mayastore
            name: maya-store
          - mountPath: /var/lib/maya/etc/maya.properties
            name: maya-config
            subPath: maya.properties
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        initContainers:
        - command:
          - sh
          - -c
          - |
            set -ex
            export MAYA=$(kubectl get ClusterRoleBinding | grep -w crb-maya-io | awk '{print $1}')
            echo $MAYA
            until [ ! -z "$MAYA" ]
            do
               echo "wating for ClusterRoleBinding"
               sleep 1;
               export MAYA=$(kubectl get ClusterRoleBinding | grep -w crb-maya-io | awk '{print $1}')
               echo $MAYA
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: mios-wait-for-crb
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for mysql"
               sleep 2;
               export COUNT=$(kubectl get pods -l app=mysql -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w mysql | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: mios-wait-for-mysql
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for chat-server"
               sleep 2;
               export COUNT=$(kubectl get pods -l app=chat-server -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w chat-server | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: mios-wait-for-chat-server
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for maya-grafana"
               sleep 2;
               export COUNT=$(kubectl get pods -l app=maya-grafana -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w maya-grafana | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: mios-wait-for-maya-grafana-service
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for maya-ui"
               sleep 2;
               export COUNT=$(kubectl get pods -l app=maya-ui -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w maya-ui | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: mios-wait-for-maya-ui
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for elasticsearch-logging"
               sleep 2;
               export COUNT=$(kubectl get pods -l k8s-app=elasticsearch-logging -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w elasticsearch-logging | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: mios-wait-for-elasticsearch-logging
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for kibana-logging"
               sleep 2;
               export COUNT=$(kubectl get pods -l k8s-app=kibana-logging -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w kibana-logging | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: mios-wait-for-kibana-logging
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        - command:
          - sh
          - -c
          - |
            set -ex
            export COUNT=0
            echo $COUNT
            until [ $COUNT -ne 0 ]
            do
               echo "wating for alertstore-tablamanager"
               sleep 2;
               export COUNT=$(kubectl get pods -l name=alertstore-tablemanager -n maya -o json  | jq -r '.items[] | select(.status.phase == "Running" and ([ .status.conditions[] | select(.type == "Ready" and .status == "True") ] | length ) >= 1 ) | .metadata.name' | grep -w alertstore-tablemanager | wc -l)
               echo $COUNT
            done
          image: registry.mayadata.io/maya-init:1.0.0
          imagePullPolicy: IfNotPresent
          name: mios-wait-for-alertstore-tablemanager
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: sa-maya-io
        serviceAccountName: sa-maya-io
        terminationGracePeriodSeconds: 30
        volumes:
        - name: maya-store
          persistentVolumeClaim:
            claimName: mayastore
        - configMap:
            defaultMode: 420
            name: maya-config
          name: maya-config
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      app: maya-ui
    name: maya-ui
    namespace: maya
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: maya-ui
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        labels:
          app: maya-ui
      spec:
        containers:
        - env:
          - name: VENDOR
            value: mod
          image: registry.mayadata.io/maya-ui:1.1.0-ee
          imagePullPolicy: Always
          name: maya-ui
          resources:
            requests:
              cpu: 10m
              memory: 32Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp/mo-vendor
            name: config-data
        dnsPolicy: ClusterFirst
        imagePullSecrets:
        - name: directoronprem-registry-secret
        initContainers:
        - command:
          - sh
          - -c
          - ./entrypoint.sh
          env:
          - name: VENDOR
            value: mod
          image: registry.mayadata.io/vendor:1.1.0-ee
          imagePullPolicy: Always
          name: config-data
          resources: {}
          securityContext:
            privileged: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp/mo-vendor
            mountPropagation: Bidirectional
            name: config-data
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - hostPath:
            path: /tmp/mo-vendor
            type: ""
          name: config-data
